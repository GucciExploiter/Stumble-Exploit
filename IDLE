import json
from os import system, name
from time import sleep
import requests

global R,B,C,G,Y,Q
R='\033[1;31m'; B='\033[1;34m'; C='\033[1;37m'; G='\033[1;32m'; Y='\033[1;33m'; Q='\033[1;36m'

logo = ('''

 ______      ____     __   __                                                             
/\  _  \    /\  _`\  /\ \ /\ \                                                            
\ \ \L\ \   \ \ \L\ \\ `\`\/'/'                ___    _ __    ___    __  __  __    ___    
 \ \  __ \   \ \ ,__/ `\/ > <                 /'___\ /\`'__\ / __`\ /\ \/\ \/\ \ /' _ `\  
  \ \ \/\ \   \ \ \/     \/'/\`\             /\ \__/ \ \ \/ /\ \L\ \\ \ \_/ \_/ \/\ \/\ \ 
   \ \_\ \_\   \ \_\     /\_\\ \_\           \ \____\ \ \_\ \ \____/ \ \___x___/'\ \_\ \_\
    \/_/\/_/    \/_/     \/_/ \/_/            \/____/  \/_/  \/___/   \/__//__/   \/_/\/_/\n\n================================\n    %sStumble Crowns V 3.1\n\n    Discord: Gucci#2661\n    TikTok: gucci..mp4\n\n https://github.com/GucciExploiter%s\n================================\n'''%(Y,C))


def clear(clean) -> None: return system(clean)

def menu():
    clear(clean)

    round = input('%s\n[ %sSelecione o round%s ]\n\n[%s0%s] %sEliminado%s\n[%s1%s] %sround 1%s\n[%s2%s] %sround 2%s\n[%s3%s] %sround 3%s\n\n%s>%s '%(logo,Y,C,G,C,Y,C,G,C,Y,C,G,C,Y,C,G,C,Y,C,B,C))       

    if round == '99' or round == 99:
        exit()

    clear(clean)
    delay = int(input('%s\n[ %sAviso: Delay muito baixo da %sBAN!%s delay minimo: 60%s]\n[ %sColoque o delay%s ]\n\n%s>%s '%(logo,B,R,B,C,Y,C,B,C)))

    if delay < 60:
        clear(clean)
        delay = int(input('%s\n[ %sVoce colocou um delay MUITO BAIXO tem ctz?%s]\n[ %sColoque o delay%s ]\n\n%s>%s '%(logo,R,C,Y,C,B,C)))

    clear(clean)
    auth = input('%s\n[ %sColoque a authorization%s ]\n\n%s>%s '%(logo,Y,C,B,C))

    rescom = 'True'

    clear(clean)

    headers = {
        'use_response_compression':rescom,
        'Accept-Encoding':'gzip, deflate',
        'authorization':auth,
        'Host':'kitkabackend.eastus.cloudapp.azure.com:5010'
    }
    
    def request():
        
        print('\n>>> %sStumble Guys requests%s \n>> %sDELAY DE %s%s%s SEGUNDO(s)%s\n>> %suse_response_compression %s[%s%s%s]\n-------------------------------------'%(G,C,G,B,delay,G,C,G,C,B,rescom,C))
        
        try:
            while True:

                request = requests.get('http://kitkabackend.eastus.cloudapp.azure.com:5010/round/finish/' + round, headers=headers)

                #request['Username'],'| Coroas:',request['Crowns'],'| Trofeus:',request['SkillRating'],'| Pais:',request['Country']
                
                if request.status_code == 200:
                    request = json.loads(request.text)
                    request = request['User']
                    print('\r[%sNickname:%s %s%s%s | %sCoroas:%s %s%s%s | %sTrofeus:%s %s%s%s | %sPais:%s %s%s%s]'%(Y,C,Q,request['Username'],C,Y,C,Q,request['Crowns'],C,Y,C,Q,request['SkillRating'],C,Y,C,Q,request['Country'],C))
                
                elif request.status_code == 401:
                    print('[%s401!%s] Falha talvez a chave de autenticação expirou ou está errada?'%(R,C));sleep(2);print('\n[%s*%s] Reiniciando script!'%(G,C));sleep(5)
                    menu()

                elif request.status_code == 403:
                    print('[%s403!%s] Sua conta foi banida!'%(R,C));sleep(5);print('\n[%s*%s] Reiniciando script!'%(G,C));sleep(10)
                    menu()
                
                elif request.status_code == 501:
                    print('[%s501!%s] Falhou'%(R,C));sleep(3);print('\n[%s*%s] Reiniciando script!'%(G,C));sleep(5)
                    menu()
                
                else:
                    print('[%sNULL%s] Sem resposta do servidor!'%(R,C))
                    
                sleep(delay)
                
        except Exception:
            print('[%s!%s] OPS! Algo esta errado\n[%s*%s] Reiniciando script!'%(R,C,G,C))
            sleep(5.9)
            menu()
    
    request()
        
if __name__ == '__main__':
	global clean
	clean ={'nt':'cls','posix':'clear'}[name]
	menu()
